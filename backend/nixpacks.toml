[phases.setup]
nixPkgs = ["jdk21", "maven"]

[phases.build]
cmds = ["cd backend && mvn clean package -DskipTests"]

[phases.start]
cmd = "cd backend && java -Dserver.port=$PORT -Dspring.profiles.active=prod -jar target/lms-backend-0.0.1-SNAPSHOT.jar"

[variables]
MAVEN_OPTS = "-Xmx1024m -XX:MaxMetaspaceSize=512m"
